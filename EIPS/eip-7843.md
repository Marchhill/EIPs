---
eip: 7843
title: SLOT precompiles
description: Precompiles to get the slot numbers of the current and parent payloads
author: Marc Harvey-Hill (@Marchhill)
discussions-to: https://ethereum-magicians.org/t/eip-7843-slot-precompile/22234
status: Draft
type: Standards Track
category: Core
created: 2024-12-06
---

## Abstract

This EIP proposes to add two precompiles that return the slot numbers of the current and parent execution payloads.

## Motivation

It is currently possible to calculate the slot number from the block timestamp. However, this requires hardcoding the chain slot length into a smart contract. This would require the contract code to be changed in the event of a future change to slot length. A better approach is for the slot length to be abstracted away from applications, and instead the slot number can be calculated in the consensus layer client and exposed in a precompile.

Exposing the slot number of the parent payload allows the detection of prior empty slots with no execution payloads.

### Example application: Encrypted Mempools

The parent payload slot number can be used by encrypted mempools. If encrypted transactions were posted in slot x, and the proposer attempts to include the decrypted transactions at a later slot y, then the precompile can ensure that there were only empty slots in between x and y. This is important as it means that no frontrunning transactions could have been inserted before slot y.

## Specification

If `block.timestamp >= TBD` then two new precompiled contracts shall be introduced:

- `SLOT` shall be created at address `TBD`. It returns as output the current slot number as a uint64 in big-endian encoding.
- `PARENTSLOT` shall be created at address `TBD`. It returns as output the slot number of the parent execution payload as a uint64 in big-endian encoding. If the slot number of the parent payload is unavailable (i.e. shortly after the fork boundary) then the max value of uint64 should be returned.

### Gas Cost

The gas costs for both `SLOT` and `PARENTSLOT` are fixed fees of `2`.

### RPC changes

The slot number is calculated in the consensus layer and passed to the execution layer through the engine API.

#### Header extension

The header encoding shall be extended to include a `slot_number` field of type `uint64`.

#### PayloadAttributes change

The engine API's `PayloadAttributes` object shall be extended to include a `slot_number` field of type `uint64`.

#### New JSON-RPC endpoints

Consensus layer clients **may** implement the following new RPC endpoints to convert between slot numbers and their corresponding timestamps.

`eth_getSlotNumberFromTimestamp`: `uint64` -> `uint64`
`eth_getTimestampFromSlotNumber`: `uint64` -> `uint64`

## Rationale

### Gas Price

The precompile is priced to match similar opcodes in the `W_base` set.

### Precompile

Making the feature a precompile rather than an opcode gives L2s flexibility to decide whether to implement it.

### Calculation in consensus layer

The slot number could alternatively be calculated in the execution layer using the timestamp, but it is more appropriate to calculate values pertaining to the beacon chain in the consensus layer. Additionally this avoids code duplication, as the slot number is already calculated in the consensus layer.

### ZK-VM proving

The precompiles should not increase the complexity of proving EVM execution, as they are similar to existing opcodes such as TIMESTAMP. The slot number of the last execution payload can be provided as an input to the circuit.

## Backwards Compatibility

No backward compatibility issues found.

## Test Cases

N/A

## Security Considerations

None.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
